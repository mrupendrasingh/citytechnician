<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - City Technician</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="images/favicon.png" type="image/png">
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="images/logo.png" alt="City Technician Logo" style="height: 50px;">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="services.html">Services</a></li>
                    <li class="nav-item"><a class="nav-link active" href="blogs.html">Blog</a></li>
                    <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                    <li class="nav-item"><a class="btn btn-primary ms-lg-3" href="booking.html">Book an Appointment</a></li>
                </ul>
            </div>
        </div>
    </nav>
    
    <section class="blog-list-section py-5 bg-light">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold">Our Blog</h2>
                <p class="lead text-muted">Latest news, tips, and insights from our tech experts.</p>
            </div>
            
            <div id="blog-list-container" class="row g-4">
                
                <div class="col-12 text-center">
                    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-2">Loading posts...</p>
                </div>
                
            </div>
        </div>
    </section>

    <footer class="bg-dark text-white pt-5 pb-4">
        <div class="container text-center text-md-start">
            <div class="row">
                <div class="col-md-3 col-lg-4 col-xl-3 mx-auto mt-3">
                    <img src="images/favicon.png" height="100"/>
                    <p>Your trusted partner for home appliance repair services in Sasaram. Quality service, delivered.</p>
                </div>
                <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
                    <h5 class="text-uppercase mb-4 fw-bold">Quick Links</h5>
                    <p><a href="index.html" class="text-white">Home</a></p>
                    <p><a href="services.html" class="text-white">Services</a></p>
                    <p><a href="booking.html" class="text-white">Booking</a></p>
                    <p><a href="about.html" class="text-white">About Us</a></p>
                </div>
                <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mt-3">
                     <h5 class="text-uppercase mb-4 fw-bold">Contact</h5>
                     <p><i class="bi bi-geo-alt-fill me-2"></i>#17, VL Square Complex, Dharamshala Rd, Sasaram - 821115</p>
                     <p><i class="bi bi-envelope-fill me-2"></i>info@citytechnician.com</p>
                     <p><i class="bi bi-telephone-fill me-2"></i>+91 8898917624</p>
                </div>
            </div>
            <hr class="mb-4">
            <div class="text-center">
                <p>Copyright Â© <span id="copyright-year">2025</span> City Technician. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    
    <script>
        // *** PASTE YOUR FIREBASE CONFIG OBJECT HERE ***
        // const firebaseConfig = {
        //     apiKey: "YOUR_API_KEY",
        //     authDomain: "YOUR_AUTH_DOMAIN",
        //     projectId: "YOUR_PROJECT_ID",
        //     storageBucket: "YOUR_STORAGE_BUCKET",
        //     messagingSenderId: "YOUR_SENDER_ID",
        //     appId: "YOUR_APP_ID"
        // };

                const firebaseConfig = {
  apiKey: "AIzaSyAxR0Gs1UhXEx6LEeEdXPjjyE-oHeB1u14",
  authDomain: "city-technician-blog.firebaseapp.com",
  projectId: "city-technician-blog",
  storageBucket: "city-technician-blog.firebasestorage.app",
  messagingSenderId: "824636956173",
  appId: "1:824636956173:web:d8db909b85065dbbdebf44",
  //measurementId: "G-PL9SK4D7RH"
};


        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Load all blogs
        document.addEventListener("DOMContentLoaded", async () => {
            const blogContainer = document.getElementById("blog-list-container");
            
            try {
                // Get posts, ordered by date descending
                const querySnapshot = await db.collection("blogs").orderBy("publishedDate", "desc").get();
                
                // Clear the loading spinner
                blogContainer.innerHTML = "";

                if (querySnapshot.empty) {
                    blogContainer.innerHTML = "<p>No blog posts found.</p>";
                    return;
                }

                querySnapshot.forEach((doc) => {
                    const post = doc.data();
                    const postId = doc.id; // Get the unique document ID
                    
                    // Create the blog card HTML (style similar to your services)
                    const blogCard = `
                    <div class="col-md-6 col-lg-4 d-flex align-items-stretch">
                        <div class="card h-100 shadow-sm border-0">
                            <img src="${post.imageUrl}" class="card-img-top" alt="${post.title}" style="height: 200px; object-fit: cover;">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title fw-bold">${post.title}</h5>
                                <p class="card-text">${post.summary}</p>
                                <a href="blog-post.html?id=${postId}" class="btn btn-primary mt-auto align-self-start">Read More</a>
                            </div>
                        </div>
                    </div>
                    `;
                    blogContainer.innerHTML += blogCard;
                });

            } catch (error) {
                console.error("Error loading blog posts: ", error);
                blogContainer.innerHTML = "<p>Error loading posts. Please try again later.</p>";
            }
        });
        
        document.getElementById('copyright-year').textContent = new Date().getFullYear();
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>